import{r as n,K as I,m as w,j as e,$ as F,S as _}from"./app-nUqQ7yHU.js";import{F as C}from"./FormSection-BUCsG2SP.js";import{I as l}from"./InputError-Dxbi3bhu.js";import{B as m}from"./button-CZNwMcjW.js";import{I as x}from"./input-BpRyKDf7.js";import{L as c}from"./label-DnNgpJC0.js";import{t as v}from"./index-Ba2aNcjd.js";import{s as d}from"./index-DYrn6zHh.js";import"./utils-DdhcCPaC.js";import"./index-DGrkKgMT.js";const z=n.memo(({user:s})=>{const{props:{jetstream:u}}=I(),[j,N]=n.useState(!1),[i,p]=n.useState(null),r=n.useRef(null),o=w({_method:"PUT",name:s.name,email:s.email,photo:null}),f=()=>{var t;(t=r.current)!=null&&t.value&&(r.current.value=null)},P=t=>{var a;t.preventDefault(),(a=r.current)!=null&&a.files[0]&&o.setData("photo",r.current.files[0]),o.post(d("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>{f(),v.success("Profile information updated")}})},g=()=>{N(!0)},b=()=>{var t;(t=r.current)==null||t.click()},S=()=>{var h;const t=(h=r.current)==null?void 0:h.files[0];if(!t)return;const a=new FileReader;a.onload=y=>{p(y.target.result)},a.readAsDataURL(t)},k=()=>{_.delete(d("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{p(null),f(),v.success("Photo deleted")}})};return e.jsx(C,{onSubmit:P,title:"Profile Information",description:"Update your account's profile information and email address.",form:e.jsxs(e.Fragment,{children:[u.managesProfilePhotos&&e.jsxs("div",{className:"col-span-6 sm:col-span-4",children:[e.jsx("input",{ref:r,type:"file",className:"hidden",onChange:S}),e.jsx(c,{htmlFor:"photo",children:"Photo"}),!i&&s.profile_photo_url&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:s.profile_photo_url,alt:s.name,className:"size-20 rounded-full object-cover"})}),i&&e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"block size-20 rounded-full bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url('${i}')`}})}),e.jsx(m,{type:"button",variant:"secondary",className:"me-2 mt-2",onClick:b,children:"Select A New Photo"}),s.profile_photo_path&&e.jsx(m,{type:"button",variant:"secondary",onClick:k,children:"Remove Photo"}),e.jsx(l,{message:o.errors.photo,className:"mt-2"})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-4",children:[e.jsx(c,{htmlFor:"name",children:"Name"}),e.jsx(x,{id:"name",type:"text",value:o.data.name,onChange:t=>o.setData("name",t.target.value),className:"mt-1 block w-full",required:!0,autoComplete:"name"}),e.jsx(l,{message:o.errors.name,className:"mt-2"})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-4",children:[e.jsx(c,{htmlFor:"email",children:"Email"}),e.jsx(x,{id:"email",type:"email",value:o.data.email,disabled:!0,className:"mt-1 block w-full",required:!0,autoComplete:"username"}),e.jsx(l,{message:o.errors.email,className:"mt-2"}),u.hasEmailVerification&&!s.email_verified_at&&e.jsxs("div",{children:[e.jsxs("p",{className:"mt-2 text-sm",children:["Your email address is unverified.",e.jsx(F,{href:d("verification.send"),method:"post",type:"button",as:"button",onClick:g,className:"rounded-md text-sm underline focus:outline-hidden focus:ring-2 focus:ring-offset-2",children:"Click here to re-send the verification email."})]}),j&&e.jsx("div",{className:"mt-2 text-sm font-medium",children:"A new verification link has been sent to your email address."})]})]})]}),actions:e.jsx(m,{disabled:o.processing,children:"Save"})})});export{z as default};
