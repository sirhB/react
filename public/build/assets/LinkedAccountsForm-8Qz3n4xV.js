import{r as c,j as t,K as M,S as B}from"./app-nUqQ7yHU.js";import{A as F}from"./ActionSection-Ly8BKCvG.js";import{L as H}from"./label-DnNgpJC0.js";import{u as z,c as O}from"./index-jkSOGXlp.js";import{u as U,c as w}from"./utils-DdhcCPaC.js";import{c as q}from"./index-Ck7UmjVM.js";import{u as D}from"./index-NQIq8vXu.js";import{u as K}from"./index-0LLtFATr.js";import{P as C}from"./index-DGrkKgMT.js";import{I as W}from"./iconify-UPomDOL-.js";import{t as d}from"./index-Ba2aNcjd.js";import{s as S}from"./index-DYrn6zHh.js";var x="Switch",[X,le]=q(x),[$,G]=X(x),j=c.forwardRef((o,n)=>{const{__scopeSwitch:e,name:i,checked:a,defaultChecked:l,required:r,disabled:s,value:u="on",onCheckedChange:b,form:g,...p}=o,[m,L]=c.useState(null),A=U(n,h=>L(h)),k=c.useRef(!1),v=m?g||!!m.closest("form"):!0,[f=!1,I]=z({prop:a,defaultProp:l,onChange:b});return t.jsxs($,{scope:e,checked:f,disabled:s,children:[t.jsx(C.button,{type:"button",role:"switch","aria-checked":f,"aria-required":r,"data-state":N(f),"data-disabled":s?"":void 0,disabled:s,value:u,...p,ref:A,onClick:O(o.onClick,h=>{I(_=>!_),v&&(k.current=h.isPropagationStopped(),k.current||h.stopPropagation())})}),v&&t.jsx(J,{control:m,bubbles:!k.current,name:i,value:u,checked:f,required:r,disabled:s,form:g,style:{transform:"translateX(-100%)"}})]})});j.displayName=x;var y="SwitchThumb",E=c.forwardRef((o,n)=>{const{__scopeSwitch:e,...i}=o,a=G(y,e);return t.jsx(C.span,{"data-state":N(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:n})});E.displayName=y;var J=o=>{const{control:n,checked:e,bubbles:i=!0,...a}=o,l=c.useRef(null),r=D(e),s=K(n);return c.useEffect(()=>{const u=l.current,b=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(b,"checked").set;if(r!==e&&p){const m=new Event("click",{bubbles:i});p.call(u,e),u.dispatchEvent(m)}},[r,e,i]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...a,tabIndex:-1,ref:l,style:{...o.style,...s,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function N(o){return o?"checked":"unchecked"}var R=j,Q=E;const T=c.forwardRef(({className:o,...n},e)=>t.jsx(R,{className:w("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",o),...n,ref:e,children:t.jsx(Q,{className:w("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));T.displayName=R.displayName;const P={availableProviders:{},activeProviders:[]},de=c.memo(({availableProviders:o=P.availableProviders,activeProviders:n=P.activeProviders})=>{const{props:{flash:e}}=M(),[i,a]=c.useState(null);c.useEffect(()=>{e.success&&d.success(e.success),e.error&&d.error(e.error)},[e]);const l=r=>{if(a(r),!n.includes(r)){d.promise(new Promise(s=>setTimeout(s,1e3)),{loading:"Redirecting to provider..."}),window.location.href=S("oauth.redirect",{provider:r});return}B.delete(S("oauth.destroy",{provider:r}),{preserveScroll:!0,onBefore:()=>{d.promise(new Promise(s=>setTimeout(s,1e3)),{loading:"Unlinking account..."})},onSuccess:()=>{setTimeout(()=>{d.success(e.success)},1e3)},onError:()=>{d.error(e.message)},onFinish:()=>{a(null)}})};return t.jsx(F,{title:"Linked Accounts",description:"Manage your linked social accounts for easier login access.",content:t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"max-w-xl text-sm",children:"Link your accounts to enable single sign-on and manage your connected social profiles."}),t.jsx("div",{children:Object.entries(o).map(([r,s])=>t.jsxs("div",{className:"flex items-center p-4 mt-4 space-x-4 rounded-md border",children:[t.jsx(W,{icon:s.icon,className:"size-8"}),t.jsx("div",{className:"flex-1 space-y-1",children:t.jsx(H,{children:s.slug.charAt(0).toUpperCase()+s.slug.slice(1)})}),t.jsx(T,{disabled:i,checked:n.includes(s.slug),onCheckedChange:()=>l(s.slug)})]},r))})]})})});export{de as default};
