import{K,r as x,m as h,j as e,S as U}from"./app-nUqQ7yHU.js";import{A}from"./ActionSection-Ly8BKCvG.js";import{F as q}from"./FormSection-BUCsG2SP.js";import{I as L}from"./InputError-Dxbi3bhu.js";import{A as G,a as J,b as Q}from"./avatar-BiazHXuE.js";import{B as i}from"./button-CZNwMcjW.js";import{D as g,a as b,b as y,c as k,d as N,e as T}from"./dialog-z35dOSef.js";import{I as V}from"./input-BpRyKDf7.js";import{L as F}from"./label-DnNgpJC0.js";import{S as M}from"./separator-BB3MwsvO.js";import{t as m}from"./index-Ba2aNcjd.js";import{s as c}from"./index-DYrn6zHh.js";import"./utils-DdhcCPaC.js";import"./index-Ck7UmjVM.js";import"./index-DGrkKgMT.js";import"./index-jkSOGXlp.js";import"./index-BidZMABv.js";import"./index-CYRNUmCa.js";import"./index-Q3TAqLyU.js";import"./index-C86NnV09.js";import"./createLucideIcon-BITYyA_o.js";function ve({team:a,availableRoles:n,userPermissions:l}){const j=K(),[D,d]=x.useState(!1),[C,R]=x.useState(null),[z,p]=x.useState(!1),[w,u]=x.useState(null),t=h({email:"",role:null}),r=h({role:null}),v=h({}),f=h({});function $(){t.post(c("team-members.store",a),{errorBag:"addTeamMember",preserveScroll:!0,onSuccess:()=>{t.reset(),m.success("Team member added")}})}function B(s){U.delete(c("team-invitations.destroy",s),{preserveScroll:!0,onSuccess:()=>m.success("Team invitation canceled")})}function I(s){R(s),r.setData("role",s.membership.role),d(!0)}function O(){r.put(c("team-members.update",[a,C]),{preserveScroll:!0,onSuccess:()=>{d(!1),m.success("Team member role updated")}})}function E(){p(!0)}function _(){v.delete(c("team-members.destroy",[a,j.props.auth.user]),{onSuccess:()=>{p(!1),m.success("Team left successfully")}})}function W(s){u(s)}function H(){f.delete(c("team-members.destroy",[a,w]),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!0,onSuccess:()=>{u(null),m.success("Team member removed successfully")}})}function S(s){return n.find(o=>o.key===s).name}return e.jsxs("div",{children:[l.canAddTeamMembers&&e.jsxs("div",{children:[e.jsx(M,{className:"my-8 hidden sm:block"}),e.jsx(q,{onSubmit:$,title:"Add Team Member",description:"Add a new team member to your team, allowing them to collaborate with you.",form:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-6",children:e.jsx("div",{className:"max-w-xl text-sm text-gray-600 dark:text-gray-400",children:"Please provide the email address of the person you would like to add to this team."})}),e.jsxs("div",{className:"col-span-6 sm:col-span-4",children:[e.jsx(F,{htmlFor:"email",children:"Email"}),e.jsx(V,{id:"email",type:"email",value:t.data.email,onChange:s=>t.setData("email",s.target.value),className:"mt-1 block w-full"}),e.jsx(L,{message:t.errors.email,className:"mt-2"})]}),n.length>0&&e.jsxs("div",{className:"col-span-6 lg:col-span-4",children:[e.jsx(F,{htmlFor:"roles",children:"Role"}),e.jsx("div",{className:"relative z-0 mt-1 cursor-pointer rounded-lg border",children:n.map((s,o)=>e.jsx("button",{type:"button",className:`relative inline-flex w-full rounded-lg px-4 py-3 focus:z-10 focus:border-primary focus:outline-hidden focus:ring-2 focus:ring-primary dark:focus:border-primary dark:focus:ring-primary ${o>0?"rounded-t-none border-t focus:border-none":""} ${o!==Object.keys(n).length-1?"rounded-b-none":""}`,onClick:()=>t.setData("role",s.key),children:e.jsxs("div",{className:t.data.role&&t.data.role!==s.key?"opacity-50":"",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`text-sm text-primary ${t.data.role===s.key?"font-semibold":""}`,children:s.name}),t.data.role===s.key&&e.jsx("svg",{className:"ms-2 size-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsx("div",{className:"mt-2 text-start text-xs",children:s.description})]})},s.key))}),e.jsx(L,{message:t.errors.role,className:"mt-2"})]})]}),actions:e.jsx(i,{disabled:t.processing,className:t.processing?"opacity-25":"",children:"Add"})})]}),a.team_invitations.length>0&&l.canAddTeamMembers&&e.jsxs("div",{children:[e.jsx(M,{className:"my-8 hidden sm:block"}),e.jsx(A,{className:"mt-10 sm:mt-0",title:"Pending Team Invitations",description:`These people have been invited to your team and have been sent an invitation email. They may join
  the team by accepting the email invitation.`,content:e.jsx("div",{className:"space-y-6",children:a.team_invitations.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:s.email}),e.jsx("div",{className:"flex items-center",children:l.canRemoveTeamMembers&&e.jsx("button",{type:"button",className:"ms-6 cursor-pointer text-sm text-red-500 focus:outline-hidden",onClick:()=>B(s),children:"Cancel"})})]},s.id))})})]}),a.users.length>0&&e.jsxs("div",{children:[e.jsx(M,{className:"my-8 hidden sm:block"}),e.jsx(A,{className:"mt-10 sm:mt-0",title:"Team Members",description:"All of the people that are part of this team.",content:e.jsx("div",{className:"space-y-6",children:a.users.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(G,{size:"sm",shape:"circle",children:[e.jsx(J,{src:s.profile_photo_url??"",alt:s.name}),e.jsx(Q,{children:s.name.charAt(0)})]}),e.jsx("div",{className:"ms-4",children:s.name})]}),e.jsxs("div",{className:"flex items-center",children:[l.canUpdateTeamMembers&&n.length>0?e.jsx("button",{type:"button",className:"ms-2 text-sm underline",onClick:()=>I(s),children:S(s.membership.role)}):n.length>0?e.jsx("div",{className:"ms-2 text-sm",children:S(s.membership.role)}):null,j.props.auth.user.id===s.id&&e.jsx("button",{type:"button",className:"ms-6 cursor-pointer text-sm text-red-500",onClick:E,children:"Leave"}),l.canRemoveTeamMembers&&j.props.auth.user.id!==s.id&&e.jsx("button",{type:"button",className:"ms-6 cursor-pointer text-sm text-red-500",onClick:()=>W(s),children:"Remove"})]})]},s.id))})})]}),e.jsx(g,{open:D,onOpenChange:d,children:e.jsxs(b,{children:[e.jsxs(y,{children:[e.jsx(k,{children:"Manage Role"}),e.jsx(N,{children:"Manage the role of this team member."})]}),C&&e.jsx("div",{className:"relative z-0 mt-1 cursor-pointer rounded-lg border border-primary",children:n.map((s,o)=>e.jsx("button",{type:"button",className:`relative inline-flex w-full rounded-lg px-4 py-3 focus:z-10 focus:border-primary focus:outline-hidden focus:ring-2 focus:ring-primary ${o>0?"rounded-t-none border-t focus:border-none":""} ${o!==Object.keys(n).length-1?"rounded-b-none":""}`,onClick:()=>r.setData("role",s.key),children:e.jsxs("div",{className:r.data.role&&r.data.role!==s.key?"opacity-50":"",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`text-sm ${r.data.role===s.key?"font-semibold":""}`,children:s.name}),r.data.role===s.key&&e.jsx("svg",{className:"ms-2 size-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsx("div",{className:"mt-2 text-xs",children:s.description})]})},s.key))}),e.jsxs(T,{children:[e.jsx(i,{variant:"secondary",onClick:()=>d(!1),children:"Cancel"}),e.jsx(i,{className:`ms-3 ${r.processing?"opacity-25":""}`,disabled:r.processing,onClick:O,children:"Save"})]})]})}),e.jsx(g,{open:z,onOpenChange:p,children:e.jsxs(b,{children:[e.jsxs(y,{children:[e.jsx(k,{children:"Leave Team"}),e.jsx(N,{children:"Are you sure you would like to leave this team?"})]}),e.jsxs(T,{children:[e.jsx(i,{variant:"secondary",onClick:()=>p(!1),children:"Cancel"}),e.jsx(i,{variant:"destructive",className:`ms-3 ${v.processing?"opacity-25":""}`,disabled:v.processing,onClick:_,children:"Leave"})]})]})}),e.jsx(g,{open:w!==null,onOpenChange:s=>!s&&u(null),children:e.jsxs(b,{children:[e.jsxs(y,{children:[e.jsx(k,{children:"Remove Team Member"}),e.jsx(N,{children:"Are you sure you would like to remove this person from the team?"})]}),e.jsxs(T,{children:[e.jsx(i,{variant:"secondary",onClick:()=>u(null),children:"Cancel"}),e.jsx(i,{variant:"destructive",className:`ms-3 ${f.processing?"opacity-25":""}`,disabled:f.processing,onClick:H,children:"Remove"})]})]})})]})}export{ve as default};
